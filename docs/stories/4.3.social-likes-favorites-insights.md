
# Story 4.3: Likes & Favorites Insights

## Status
Draft

## Story
**As a** creator and platform analyst,
**I want** to track likes and favorites with meaningful insights,
**so that** I understand engagement and tailor future creations.

## Acceptance Criteria
1. Ensure like/favorite server actions update `creations` engagement metrics, `personalized_feed_cache` signals, and write detailed events to `engagement_events` collection.  
2. Provide creator dashboard components (under profile) summarizing likes/favorites by creation, timeframe, and variant.  
3. Feed service adjusts ranking signals based on likes/favorites, factoring in time decay, and exposes insights metadata in analytics pipeline.  
4. Observability logs engagement events, reconciles counts, and triggers alerts when anomalies occur (e.g., suspicious spikes).  
5. Tests cover server action logic, dashboard displays, analytics hooks, and regression ensuring social features toggle cleanly.

## Tasks / Subtasks
- [ ] Engagement logging (AC: 1)  
  - [ ] Update existing like/favorite actions to persist events in `engagement_events`.  
  - [ ] Refresh feed signals accordingly.  
- [ ] Creator dashboard (AC: 2)  
  - [ ] Add dashboard view under profile showing likes/favorites metrics.  
  - [ ] Implement filters/timeframe selectors.  
- [ ] Analytics integration (AC: 3)  
  - [ ] Ensure ranking signals incorporate time decay; expose insights to analytics.  
  - [ ] Provide documentation for analysts.  
- [ ] Observability (AC: 4)  
  - [ ] Emit metrics (`social.like.count`, `social.favorite.count`), detect anomalies.  
  - [ ] Configure alerts for suspicious activity.  
- [ ] Testing (AC: 5)  
  - [ ] Jest tests for engagement actions + analytics export.  
  - [ ] Playwright tests for dashboard UI.  
  - [ ] Manual regression for feature flag fallback.

## Dev Notes
### Data Models
- `engagement_events` records like/favorite events; ensure schema consistent.  
  `[Source: architecture-brownfield.md#5.3-Data-Model]`

### Services
- Feed ranking adjustments align with Story 1.x; ensure impedance.  
  `[Source: architecture.md#4-Application-Architecture]`

### UI
- Dashboard should align with design tokens; accessible from creator profile.  
  `[Source: architecture.md#3-Business-User-Experience-Architecture]`

### Files
- Server actions under `social-service`; dashboard components under `src/components/screens/creator-dashboard.tsx`.  
  `[Source: architecture.md#4-Application-Architecture]`

### Testing
- Unit/integration tests per architecture.  
  `[Source: architecture.md#8-Testing-Strategy]`

### Constraints
- Feature flag to disable social insights; ensure metrics anonymized.  
  `[Source: architecture.md#Next-Steps]`

## Testing
- Jest tests for engagement logging and analytics export. `[Source: architecture.md#8-Testing-Strategy]`
- Playwright tests for creator dashboard. `[Source: architecture.md#8-Testing-Strategy]`

## Change Log
| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2025-01-12 | v0.1 | Draft for likes/favorites insights | Bob (scrum-master) |
